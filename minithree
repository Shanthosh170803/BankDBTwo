=== DBConnection.java === 
package quizportal.util;
 
import java.sql.Connection;
import java.sql.DriverManager;
 
public class DBConnection {
 
    private static final String URL = "jdbc:mysql://localhost:3306/quiz_portal";
    private static final String USERNAME = "root";   
    private static final String PASSWORD = "root@39";       
 
    public static Connection getConnection() {
        Connection conn = null;
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);
        } catch (Exception e) {
            System.out.println("Database connection error: " + e.getMessage());
        }
        return conn;
    }
}

===Admin.java===
package quizportal.model;
 
public class Admin {
    private int id;
    private String username;
    private String password;
 
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
 
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
 
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}

===Question.java===
package quizportal.model;
 
public class Question {
    private int id;
    private int quizId;
    private String questionText;
    private String optionA;
    private String optionB;
    private String optionC;
    private String optionD;
    private String correctOption;
 
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
 
    public int getQuizId() {
        return quizId;
    }
    public void setQuizId(int quizId) {
        this.quizId = quizId;
    }
 
    public String getQuestionText() {
        return questionText;
    }
    public void setQuestionText(String questionText) {
        this.questionText = questionText;
    }
 
    public String getOptionA() {
        return optionA;
    }
    public void setOptionA(String optionA) {
        this.optionA = optionA;
    }
 
    public String getOptionB() {
        return optionB;
    }
    public void setOptionB(String optionB) {
        this.optionB = optionB;
    }
 
    public String getOptionC() {
        return optionC;
    }
    public void setOptionC(String optionC) {
        this.optionC = optionC;
    }
 
    public String getOptionD() {
        return optionD;
    }
    public void setOptionD(String optionD) {
        this.optionD = optionD;
    }
 
    public String getCorrectOption() {
        return correctOption;
    }
    public void setCorrectOption(String correctOption) {
        this.correctOption = correctOption;
    }
}
===Quiz.java===
package quizportal.model;
 
public class Quiz {
    private int id;
    private String name;
    private String description;
 
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
 
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
 
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
}
===User.java===
package quizportal.model;
 
public class User {
    private int id;
    private String name;
    private String email;
    private String password;
 
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
 
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
 
    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }
 
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
}
===UserAttempt.java===
package quizportal.model;
 
import java.sql.Timestamp;
 
public class UserAttempt {
    private int id;
    private int userId;
    private int quizId;
    private int score;
    private int totalQuestions;
    private Timestamp attemptTime;
 
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
 
    public int getUserId() {
        return userId;
    }
    public void setUserId(int userId) {
        this.userId = userId;
    }
 
    public int getQuizId() {
        return quizId;
    }
    public void setQuizId(int quizId) {
        this.quizId = quizId;
    }
 
    public int getScore() {
        return score;
    }
    public void setScore(int score) {
        this.score = score;
    }
 
    public int getTotalQuestions() {
        return totalQuestions;
    }
    public void setTotalQuestions(int totalQuestions) {
        this.totalQuestions = totalQuestions;
    }
 
    public Timestamp getAttemptTime() {
        return attemptTime;
    }
    public void setAttemptTime(Timestamp attemptTime) {
        this.attemptTime = attemptTime;
    }
}
===AddQuestionServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuestionDAO;
import quizportal.model.Question;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
 
@WebServlet("/addQuestion")
public class AddQuestionServlet extends HttpServlet {
 
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        int quizId = Integer.parseInt(request.getParameter("quizId"));
        String questionText = request.getParameter("questionText");
        String optionA = request.getParameter("optionA");
        String optionB = request.getParameter("optionB");
        String optionC = request.getParameter("optionC");
        String optionD = request.getParameter("optionD");
        String correctOption = request.getParameter("correctOption");
 
        try {
            QuestionDAO questionDAO = new QuestionDAO();
 
            Question q = new Question();
            q.setQuizId(quizId);
            q.setQuestionText(questionText);
            q.setOptionA(optionA);
            q.setOptionB(optionB);
            q.setOptionC(optionC);
            q.setOptionD(optionD);
            q.setCorrectOption(correctOption);
 
            boolean inserted = questionDAO.addQuestion(q);
 
            if (inserted) {
                response.sendRedirect("listQuestions?quizId=" + quizId + "&success=1");
            } else {
                response.sendRedirect("admin/addQuestion.jsp?quizId=" + quizId + "&error=1");
            }
 
        } catch (Exception e) {
            e.printStackTrace();
            response.sendRedirect("admin/addQuestion.jsp?quizId=" + quizId + "&error=1");
        }
    }
}
===DeleteQuestionServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuestionDAO;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
 
@WebServlet("/deleteQuestion")
public class DeleteQuestionServlet extends HttpServlet {
 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        String idStr = request.getParameter("id");
        String quizIdStr = request.getParameter("quizId");
 
        if (idStr == null || quizIdStr == null) {
            response.getWriter().println("Missing question id or quiz id.");
            return;
        }
 
        try {
            int id = Integer.parseInt(idStr);
            int quizId = Integer.parseInt(quizIdStr);
 
            QuestionDAO questionDAO = new QuestionDAO();
            boolean deleted = questionDAO.deleteQuestion(id);
 
            if (deleted) {
                response.sendRedirect("listQuestions?quizId=" + quizId);
            } else {
                response.getWriter().println("Failed to delete question.");
            }
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error: " + e.getMessage());
        }
    }
}
===DeleteQuizServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuizDAO;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
 
@WebServlet("/deleteQuiz")
public class DeleteQuizServlet extends HttpServlet {
 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        int quizId = Integer.parseInt(request.getParameter("id"));
 
        try {
            QuizDAO quizDAO = new QuizDAO();
            boolean deleted = quizDAO.deleteQuiz(quizId);
 
            if (deleted) {
                response.sendRedirect("listQuizzes");
            } else {
                response.getWriter().println("Failed to delete quiz.");
            }
 
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error deleting quiz: " + e.getMessage());
        }
    }
}
===EditQuestionServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuestionDAO;
import quizportal.model.Question;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
 
@WebServlet("/editQuestion")
public class EditQuestionServlet extends HttpServlet {
 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        String idStr = request.getParameter("id");
        String quizIdStr = request.getParameter("quizId");
 
        if (idStr == null || quizIdStr == null) {
            response.getWriter().println("Missing question ID or quiz ID.");
            return;
        }
 
        int id = Integer.parseInt(idStr);
        int quizId = Integer.parseInt(quizIdStr);
 
        try {
            QuestionDAO questionDAO = new QuestionDAO();
            Question question = questionDAO.getQuestionById(id);
 
            request.setAttribute("question", question);
            request.setAttribute("quizId", quizId);
 
            request.getRequestDispatcher("admin/editQuestion.jsp").forward(request, response);
 
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error loading question: " + e.getMessage());
        }
    }
 
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        int id = Integer.parseInt(request.getParameter("id"));
        int quizId = Integer.parseInt(request.getParameter("quizId"));
 
        String questionText = request.getParameter("questionText");
        String optionA = request.getParameter("optionA");
        String optionB = request.getParameter("optionB");
        String optionC = request.getParameter("optionC");
        String optionD = request.getParameter("optionD");
        String correctOption = request.getParameter("correctOption");
 
        try {
            Question question = new Question();
            question.setId(id);
            question.setQuizId(quizId);
            question.setQuestionText(questionText);
            question.setOptionA(optionA);
            question.setOptionB(optionB);
            question.setOptionC(optionC);
            question.setOptionD(optionD);
            question.setCorrectOption(correctOption);
 
            QuestionDAO questionDAO = new QuestionDAO();
            boolean updated = questionDAO.updateQuestion(question);
 
            if (updated) {
                response.sendRedirect("listQuestions?quizId=" + quizId);
            } else {
                response.getWriter().println("Failed to update question.");
            }
 
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error updating question: " + e.getMessage());
        }
    }
}
===EditQuizServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuizDAO;
import quizportal.model.Quiz;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
 
@WebServlet("/editQuiz")
public class EditQuizServlet extends HttpServlet {
 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        int quizId = Integer.parseInt(request.getParameter("id"));
        try {
            QuizDAO quizDAO = new QuizDAO();
            Quiz quiz = quizDAO.getQuizById(quizId);
 
            request.setAttribute("quiz", quiz);
            request.getRequestDispatcher("admin/editQuiz.jsp").forward(request, response);
 
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error fetching quiz: " + e.getMessage());
        }
    }
 
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        int quizId = Integer.parseInt(request.getParameter("id"));
        String quizName = request.getParameter("quizName");
        String description = request.getParameter("description");
 
        try {
            QuizDAO quizDAO = new QuizDAO();
            Quiz quiz = new Quiz();
            quiz.setId(quizId);
            quiz.setName(quizName);
            quiz.setDescription(description);
 
            boolean updated = quizDAO.updateQuiz(quiz);
 
            if (updated) {
                response.sendRedirect("listQuizzes");
            } else {
                response.sendRedirect("admin/editQuiz.jsp?id=" + quizId + "&error=1");
            }
 
        } catch (Exception e) {
            e.printStackTrace();
            response.sendRedirect("admin/editQuiz.jsp?id=" + quizId + "&error=1");
        }
    }
}
===ListQuestionServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuestionDAO;
import quizportal.model.Question;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
import java.util.List;
 
@WebServlet("/listQuestions")
public class ListQuestionServlet extends HttpServlet {
 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        String quizIdStr = request.getParameter("quizId");
        if (quizIdStr == null) {
            response.getWriter().println("Quiz ID missing! Go back to quiz list.");
            return;
        }
 
        int quizId = Integer.parseInt(quizIdStr);
 
        try {
            QuestionDAO questionDAO = new QuestionDAO();
            List<Question> questions = questionDAO.getQuestionsByQuizId(quizId);
 
            request.setAttribute("questions", questions);
            request.setAttribute("quizId", quizId);
            request.getRequestDispatcher("admin/listQuestions.jsp").forward(request, response);
 
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error fetching questions: " + e.getMessage());
        }
    }
}
===ListQuizzesServlet.java===
package quizportal.servlet.admin;
 
import quizportal.dao.QuizDAO;
import quizportal.model.Quiz;
 
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.io.IOException;
import java.util.List;
 
@WebServlet("/listQuizzes")
public class ListQuizzesServlet extends HttpServlet {
 
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
 
        try {
            QuizDAO quizDAO = new QuizDAO();
            List<Quiz> quizzes = quizDAO.getAllQuizzes();
 
            request.setAttribute("quizzes", quizzes);
            request.getRequestDispatcher("admin/quizzes.jsp").forward(request, response);
 
        } catch (Exception e) {
            e.printStackTrace();
            response.getWriter().println("Error fetching quizzes: " + e.getMessage());
        }
    }
}

 ===addQuestion.jsp===
 <%
	String quizIdStr=request.getParameter("quizId");
	if(quizIdStr==null){
		out.println("Quiz Id Missing! Go back to quiz list");
		return;
	}
    int quizId = Integer.parseInt(request.getParameter("quizId"));
%>
 
<!DOCTYPE html>
<html>
<head>
    <title>Add Question</title>
</head>
<body>
    <h2>Add Question</h2>
 
    <form action="../addQuestion" method="post">
        <input type="hidden" name="quizId" value="<%=quizId%>">
 
        <label>Question Text:</label><br>
        <textarea name="questionText" required></textarea><br><br>
 
        <label>Option A:</label><br>
        <input type="text" name="optionA" required><br><br>
 
        <label>Option B:</label><br>
        <input type="text" name="optionB" required><br><br>
 
        <label>Option C:</label><br>
        <input type="text" name="optionC" required><br><br>
 
        <label>Option D:</label><br>
        <input type="text" name="optionD" required><br><br>
 
        <label>Correct Option (A/B/C/D):</label><br>
        <input type="text" name="correctOption" maxlength="1" required><br><br>
 
        <button type="submit">Add Question</button>
    </form>
 
    <% if (request.getParameter("error") != null) { %>
        <p style="color:red;">Failed to add question. Try again.</p>
    <% } %>
 
    <br>
    <a href="listQuestions?quizId=<%=quizId%>">Back to Question List</a>
</body>
</html>
===addQuiz.jsp===
<!DOCTYPE html>
<html>
<head>
    <title>Add Quiz</title>
</head>
<body>
    <h2>Add New Quiz</h2>
 
    <form action="../addQuiz" method="post">
        <label>Quiz Name:</label><br>
        <input type="text" name="quizName" required><br><br>
 
        <label>Description:</label><br>
        <textarea name="description" required></textarea><br><br>
 
        <button type="submit">Add Quiz</button>
    </form>
 
    <% if (request.getParameter("success") != null) { %>
        <p style="color:green;">Quiz added successfully!</p>
    <% } %>
 
    <% if (request.getParameter("error") != null) { %>
        <p style="color:red;">Failed to add quiz. Try again.</p>
    <% } %>
 
</body>
</html>
===editQuestion.jsp===
<%@ page import="quizportal.model.Question" %>
 
<%
    Question q = (Question) request.getAttribute("question");
    int quizId = (int) request.getAttribute("quizId");
%>
 
<!DOCTYPE html>
<html>
<head>
    <title>Edit Question</title>
</head>
<body>
 
<h2>Edit Question</h2>
 
<form action="editQuestion" method="post">
 
    <input type="hidden" name="id" value="<%= q.getId() %>">
    <input type="hidden" name="quizId" value="<%= quizId %>">
 
    Question:<br>
    <input type="text" name="questionText" value="<%= q.getQuestionText() %>" required><br><br>
 
    Option A:<br>
    <input type="text" name="optionA" value="<%= q.getOptionA() %>" required><br><br>
 
    Option B:<br>
    <input type="text" name="optionB" value="<%= q.getOptionB() %>" required><br><br>
 
    Option C:<br>
    <input type="text" name="optionC" value="<%= q.getOptionC() %>" required><br><br>
 
    Option D:<br>
    <input type="text" name="optionD" value="<%= q.getOptionD() %>" required><br><br>
 
    Correct Option:<br>
    <select name="correctOption" required>
        <option value="A" <%= q.getCorrectOption().equals("A") ? "selected" : "" %>>A</option>
        <option value="B" <%= q.getCorrectOption().equals("B") ? "selected" : "" %>>B</option>
        <option value="C" <%= q.getCorrectOption().equals("C") ? "selected" : "" %>>C</option>
        <option value="D" <%= q.getCorrectOption().equals("D") ? "selected" : "" %>>D</option>
    </select>
    <br><br>
 
    <button type="submit">Update Question</button>
</form>
 
<br>
<a href="listQuestions?quizId=<%=quizId%>">Back to Question List</a>
 
</body>
</html>
===editQuiz.jsp===
<%@ page import="quizportal.model.Quiz" %>
<%
    Quiz quiz = (Quiz) request.getAttribute("quiz");
%>
 
<!DOCTYPE html>
<html>
<head>
    <title>Edit Quiz</title>
</head>
<body>
    <h2>Edit Quiz</h2>
 
    <form action="../editQuiz" method="post">
        <input type="hidden" name="id" value="<%=quiz.getId()%>">
 
        <label>Quiz Name:</label><br>
        <input type="text" name="quizName" value="<%=quiz.getName()%>" required><br><br>
 
        <label>Description:</label><br>
        <textarea name="description" required><%=quiz.getDescription()%></textarea><br><br>
 
        <button type="submit">Update Quiz</button>
    </form>
 
    <% if (request.getParameter("error") != null) { %>
        <p style="color:red;">Failed to update quiz. Try again.</p>
    <% } %>
 
    <br>
    <a href="listQuizzes">Back to Quiz List</a>
</body>
</html>
===listQuestion.jsp===
<%@ page import="java.util.List" %>
<%@ page import="quizportal.model.Question" %>
 
<%
    List<Question> questions = (List<Question>) request.getAttribute("questions");
    int quizId = (int) request.getAttribute("quizId");
%>
 
<!DOCTYPE html>
<html>
<head>
    <title>Questions List</title>
</head>
<body>
    <h2>Questions for Quiz ID: <%=quizId%></h2>
 
    <a href="addQuestion.jsp?quizId=<%=quizId%>">Add New Question</a><br><br>
 
    <table border="1" cellpadding="10">
        <tr>
            <th>ID</th>
            <th>Question</th>
            <th>Option A</th>
            <th>Option B</th>
            <th>Option C</th>
            <th>Option D</th>
            <th>Correct</th>
            <th>Actions</th>
        </tr>
 
        <%
            if (questions != null) {
                for (Question q : questions) {
        %>
        <tr>
            <td><%=q.getId()%></td>
            <td><%=q.getQuestionText()%></td>
            <td><%=q.getOptionA()%></td>
            <td><%=q.getOptionB()%></td>
            <td><%=q.getOptionC()%></td>
            <td><%=q.getOptionD()%></td>
            <td><%=q.getCorrectOption()%></td>
            <td>
                <a href="editQuestion.jsp?id=<%=q.getId()%>&quizId=<%=quizId%>">Edit</a> |
                <a href="deleteQuestion?id=<%=q.getId()%>&quizId=<%=quizId%>">onclick="return confirm('Delete this question?);">Delete</a>
            </td>
        </tr>
        <%
                }
            }
        %>
    </table>
 
    <br>
    <a href="listQuizzes">Back to Quiz List</a>
</body>
</html>
===quizzes.jsp===
<%@ page import="java.util.List" %>
<%@ page import="quizportal.model.Quiz" %>
<%
    List<Quiz> quizzes = (List<Quiz>) request.getAttribute("quizzes");
%>
 
<!DOCTYPE html>
<html>
<head>
    <title>All Quizzes</title>
</head>
<body>
    <h2>All Quizzes</h2>
    <a href="addQuiz.jsp">Add New Quiz</a><br><br>
 
    <table border="1" cellpadding="10">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
        <%
            if (quizzes != null) {
                for (Quiz q : quizzes) {
        %>
        <tr>
            <td><%= q.getId() %></td>
            <td><%= q.getName() %></td>
            <td><%= q.getDescription() %></td>
            <td>
                <a href="editQuiz.jsp?id=<%=q.getId()%>">Edit</a> |
                <a href="deleteQuiz?id=<%=q.getId()%>"onclick="return confirm('Delete this quiz?')">Delete</a>
            </td>
        </tr>
        <%
                }
            }
        %>
    </table>
</body>
</html>
===pom.xml===
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
 
    <modelVersion>4.0.0</modelVersion>
 
    <groupId>quizportal</groupId>
    <artifactId>OnlineQuizPortal</artifactId>
    <version>1.0</version>
    <packaging>war</packaging>
 
    <dependencies>
 
        <!-- Servlet API -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>4.0.1</version>
            <scope>provided</scope>
        </dependency>
 
        <!-- JSP API -->
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>javax.servlet.jsp-api</artifactId>
            <version>2.3.3</version>
            <scope>provided</scope>
        </dependency>
 
        <!-- JSTL -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
 
        <!-- MySQL JDBC Driver -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.33</version>
        </dependency>
 
    </dependencies>
 
</project>
